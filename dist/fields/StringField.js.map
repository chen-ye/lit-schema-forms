{"version":3,"file":"StringField.js","sourceRoot":"","sources":["../../src/fields/StringField.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC3B,OAAO,uDAAuD,CAAC;AAE/D,OAAO,6DAA6D,CAAC;AAIrE,MAAM,UAAU,iBAAiB,CAC/B,GAAW,EACX,MAAkB,EAClB,KAAc,EACd,QAAuB,EACvB,OAAiB,EAAE,EACnB,OAAe,EAAE,EACjB,SAA4B,EAAE;IAE9B,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,gBAAgB,KAAK,IAAI,IAAI,EAAE,CAAC,CAAC;IAC9E,MAAM,YAAY,GAAG,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IAEzG,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,UAAU,EAAE,CAAC;QACrC,OAAO,IAAI,CAAA;;gBAEC,MAAM,CAAC,KAAK,IAAI,GAAG;gBAClB,KAAgB,IAAI,EAAE;sBAChB,IAAI,CAAC,gBAAgB,CAAY,IAAI,EAAE;oBAC1C,YAAY,IAAK,IAAI,CAAC,SAAS,CAAY,IAAI,EAAE;mBAClD,CAAC,CAAC,YAAY;oBACb,CAAC,CAAQ,EAAE,EAAE,CAAC,QAAQ,CAAE,CAAC,CAAC,MAA2B,CAAC,KAAK,CAAC;;KAE3E,CAAC;IACJ,CAAC;IAED,IAAI,SAAS,GAAG,MAAM,CAAC;IACvB,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC;IACjC,IAAI,MAAM,KAAK,UAAU;QAAE,SAAS,GAAG,UAAU,CAAC;IAClD,IAAI,MAAM,KAAK,OAAO;QAAE,SAAS,GAAG,OAAO,CAAC;IAC5C,IAAI,MAAM,KAAK,KAAK;QAAE,SAAS,GAAG,KAAK,CAAC;IACxC,IAAI,MAAM,KAAK,MAAM;QAAE,SAAS,GAAG,MAAM,CAAC;IAC1C,IAAI,MAAM,KAAK,gBAAgB;QAAE,SAAS,GAAG,gBAAgB,CAAC;IAC9D,IAAI,MAAM,KAAK,MAAM;QAAE,SAAS,GAAG,MAAM,CAAC;IAC1C,IAAI,MAAM,KAAK,OAAO;QAAE,SAAS,GAAG,OAAO,CAAC;IAC5C,IAAI,MAAM,KAAK,KAAK;QAAE,SAAS,GAAG,KAAK,CAAC;IACxC,IAAI,MAAM,KAAK,QAAQ;QAAE,SAAS,GAAG,QAAQ,CAAC;IAE9C,IAAI,MAAM,CAAC,MAAM,KAAK,OAAO;QAAE,SAAS,GAAG,OAAO,CAAC;IACnD,IAAI,MAAM,CAAC,MAAM,KAAK,KAAK;QAAE,SAAS,GAAG,KAAK,CAAC;IAC/C,IAAI,MAAM,CAAC,MAAM,KAAK,WAAW;QAAE,SAAS,GAAG,gBAAgB,CAAC;IAChE,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM;QAAE,SAAS,GAAG,MAAM,CAAC;IACjD,IAAI,MAAM,CAAC,MAAM,KAAK,MAAM;QAAE,SAAS,GAAG,MAAM,CAAC;IAEjD,OAAO,IAAI,CAAA;;;aAGA,SAAS;cACR,MAAM,CAAC,KAAK,IAAI,GAAG;cAClB,KAAgB,IAAI,EAAE;oBAChB,IAAI,CAAC,gBAAgB,CAAY,IAAI,EAAE;kBAC1C,YAAY,IAAK,IAAI,CAAC,SAAS,CAAY,IAAI,EAAE;iBAClD,CAAC,CAAC,YAAY;kBACb,CAAC,CAAQ,EAAE,EAAE,CAAC,QAAQ,CAAE,CAAC,CAAC,MAAkB,CAAC,KAAK,CAAC;;GAElE,CAAC;AACJ,CAAC","sourcesContent":["import { html } from 'lit';\nimport '@awesome.me/webawesome/dist/components/input/input.js';\nimport type WaInput from '@awesome.me/webawesome/dist/components/input/input.js';\nimport '@awesome.me/webawesome/dist/components/textarea/textarea.js';\nimport type { ChangeHandler, JSONSchema, UISchema } from '../types.js';\nimport type { ValidationError } from '../utils/validator.js';\n\nexport function renderStringField(\n  key: string,\n  schema: JSONSchema,\n  value: unknown,\n  onChange: ChangeHandler,\n  view: UISchema = {},\n  path: string = '',\n  errors: ValidationError[] = [],\n) {\n  const currentErrors = errors.filter((e) => e.instanceLocation === `#${path}`);\n  const errorMessage = currentErrors.length > 0 ? currentErrors.map((e) => e.error).join('; ') : undefined;\n\n  if (view['ui:widget'] === 'textarea') {\n    return html`\n      <wa-textarea\n        label=${schema.title || key}\n        value=${(value as string) || ''}\n        placeholder=${(view['ui:placeholder'] as string) || ''}\n        help-text=${errorMessage || (view['ui:help'] as string) || ''}\n        ?invalid=${!!errorMessage}\n        @wa-input=${(e: Event) => onChange((e.target as HTMLInputElement).value)}\n      ></wa-textarea>\n    `;\n  }\n\n  let inputType = 'text';\n  const widget = view['ui:widget'];\n  if (widget === 'password') inputType = 'password';\n  if (widget === 'email') inputType = 'email';\n  if (widget === 'uri') inputType = 'url';\n  if (widget === 'date') inputType = 'date';\n  if (widget === 'datetime-local') inputType = 'datetime-local';\n  if (widget === 'time') inputType = 'time';\n  if (widget === 'color') inputType = 'color';\n  if (widget === 'tel') inputType = 'tel';\n  if (widget === 'search') inputType = 'search';\n\n  if (schema.format === 'email') inputType = 'email';\n  if (schema.format === 'uri') inputType = 'url';\n  if (schema.format === 'date-time') inputType = 'datetime-local';\n  if (schema.format === 'date') inputType = 'date';\n  if (schema.format === 'time') inputType = 'time';\n\n  return html`\n\n    <wa-input\n      type=${inputType}\n      label=${schema.title || key}\n      value=${(value as string) || ''}\n      placeholder=${(view['ui:placeholder'] as string) || ''}\n      help-text=${errorMessage || (view['ui:help'] as string) || ''}\n      ?invalid=${!!errorMessage}\n      @wa-input=${(e: Event) => onChange((e.target as WaInput).value)}\n    ></wa-input>\n  `;\n}\n"]}