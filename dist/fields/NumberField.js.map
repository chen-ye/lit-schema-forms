{"version":3,"file":"NumberField.js","sourceRoot":"","sources":["../../src/fields/NumberField.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,IAAI,EAAE,MAAM,KAAK,CAAC;AAC3B,OAAO,uDAAuD,CAAC;AAE/D,OAAO,yDAAyD,CAAC;AAKjE,MAAM,UAAU,iBAAiB,CAC/B,GAAW,EACX,MAAkB,EAClB,KAAc,EACd,QAAuB,EACvB,OAAiB,EAAE,EACnB,OAAe,EAAE,EACjB,SAA4B,EAAE;IAE9B,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,gBAAgB,KAAK,IAAI,IAAI,EAAE,CAAC,CAAC;IAC9E,MAAM,YAAY,GAAG,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;IAEzG,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,OAAO,EAAE,CAAC;QAClC,OAAO,IAAI,CAAA;;gBAEC,MAAM,CAAC,KAAK,IAAI,GAAG;gBAClB,KAAgB,IAAI,CAAC;cACxB,MAAM,CAAC,OAAO,IAAI,CAAC;cACnB,MAAM,CAAC,OAAO,IAAI,GAAG;eACpB,MAAM,CAAC,UAAU,IAAI,CAAC;oBACjB,YAAY,IAAK,IAAI,CAAC,SAAS,CAAY,IAAI,EAAE;mBAClD,CAAC,CAAC,YAAY;oBACb,CAAC,CAAQ,EAAE,EAAE,CAAC,QAAQ,CAAE,CAAC,CAAC,MAAmB,CAAC,KAAK,CAAC;;KAEnE,CAAC;IACJ,CAAC;IAED,OAAO,IAAI,CAAA;;;cAGC,MAAM,CAAC,KAAK,IAAI,GAAG;cACnB,MAAM,CAAC,KAAK,IAAI,EAAE,CAAC;kBACf,YAAY,IAAK,IAAI,CAAC,SAAS,CAAY,IAAI,EAAE;iBAClD,CAAC,CAAC,YAAY;kBACb,CAAC,CAAQ,EAAE,EAAE;QACvB,MAAM,GAAG,GAAI,CAAC,CAAC,MAAkB,CAAC,KAAK,CAAC;QACxC,QAAQ,CAAC,GAAG,KAAK,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;IACjD,CAAC;;GAEJ,CAAC;AACJ,CAAC","sourcesContent":["import { html } from 'lit';\nimport '@awesome.me/webawesome/dist/components/input/input.js';\nimport type WaInput from '@awesome.me/webawesome/dist/components/input/input.js';\nimport '@awesome.me/webawesome/dist/components/slider/slider.js';\nimport type WaSlider from '@awesome.me/webawesome/dist/components/slider/slider.js';\nimport type { ChangeHandler, JSONSchema, UISchema } from '../types.js';\nimport type { ValidationError } from '../utils/validator.js';\n\nexport function renderNumberField(\n  key: string,\n  schema: JSONSchema,\n  value: unknown,\n  onChange: ChangeHandler,\n  view: UISchema = {},\n  path: string = '',\n  errors: ValidationError[] = [],\n) {\n  const currentErrors = errors.filter((e) => e.instanceLocation === `#${path}`);\n  const errorMessage = currentErrors.length > 0 ? currentErrors.map((e) => e.error).join('; ') : undefined;\n\n  if (view['ui:widget'] === 'range') {\n    return html`\n      <wa-slider\n        label=${schema.title || key}\n        value=${(value as number) || 0}\n        min=${schema.minimum ?? 0}\n        max=${schema.maximum ?? 100}\n        step=${schema.multipleOf ?? 1}\n        help-text=${errorMessage || (view['ui:help'] as string) || ''}\n        ?invalid=${!!errorMessage}\n        @wa-input=${(e: Event) => onChange((e.target as WaSlider).value)}\n      ></wa-slider>\n    `;\n  }\n\n  return html`\n    <wa-input\n      type=\"number\"\n      label=${schema.title || key}\n      value=${String(value || '')}\n      help-text=${errorMessage || (view['ui:help'] as string) || ''}\n      ?invalid=${!!errorMessage}\n      @wa-input=${(e: Event) => {\n        const val = (e.target as WaInput).value;\n        onChange(val === '' ? undefined : Number(val));\n      }}\n    ></wa-input>\n  `;\n}\n"]}